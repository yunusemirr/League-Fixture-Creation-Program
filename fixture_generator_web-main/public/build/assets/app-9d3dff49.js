var _=Object.defineProperty;var T=(o,a,t)=>a in o?_(o,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[a]=t;var s=(o,a,t)=>(T(o,typeof a!="symbol"?a+"":a,t),t);import{N as d,a as j}from"./notiflix-aio-3.2.6.min-83f93613.js";$(document).on("click touch","[ajax-check-user]",function(o){o.preventDefault();const a=route("user.ajax_check"),t=$(this).attr("ajax-check-user"),e=$(this).parents(".form-group").find(`[name=${t}]`).val();$.ajax({url:a,method:"GET",data:{search:t,value:e},success:function(n){console.log(n)}})});$(document).ready(function(){let o=$("[data-control=select2][custom-inputer]");$.each(o,function(t,e){$(e).select2({tags:!0,allowClear:!0})}),$(document).on("input",".is-invalid",function(){$(this).removeClass("is-invalid")});function a(t){let e=t.find("select");$.each(e,function(n,l){$(l).val("").trigger("change")})}$(document).on("click","[ajax-create]",function(t){t.preventDefault();const e=$(this).attr("href"),n=$("#ajax-modal"),l=n.find("form.ajax-form"),r=n.data("store");n.attr("data-type","store"),n.length>0&&r!=null&&r!=null?n.modal("show"):window.location.href=e,h(),a(l),l.attr("action",r)}),$(document).on("click","[ajax-edit]",function(t){t.preventDefault();const e=$(this).attr("href"),n=$("#ajax-modal"),l=n.find("form.ajax-form");n.attr("data-type","update"),h(),n.modal("show"),n.length<0&&l.length<0&&(window.location.href=e),(_dt==null||_dt==null)&&(window.location.href=e);const r=_dt.getDatatable(),k=$(this).closest("tr"),i=r.rows(k).data()[0],x=new FormData(l[0]),w=Object.fromEntries(x.entries()),f=n.data("update");(i.id==null||i.id==null||f==null||f==null)&&(window.location.href=e);for(const u in w)if(i[u]!=null){let c=$(l).find(`[name=${u}]`);if(c.length>0){if(c.attr("type")=="file")continue;if(c[0].tagName=="SELECT"){console.log(i);let y=$(c).find("option"),g=$(y).filter(function(z,v){return $(v).attr("value")==i[u]});g.length>0&&c.val($(g).val()).trigger("change")}else $(c).val(i[u])}}const m=new URL(f);m.searchParams.set("id",i.id),l.attr("action",m.toString())})});function h(){let o=$("#ajax-modal").find("form.ajax-form").find("input, select, textarea");$.each(o,function(a,t){$(t).attr("name")!="_token"&&($(t).parents(".form-group").find(".text-danger").remove(),$(t).val("").trigger("change").closest(".text-danger").remove())})}$(document).on("hidden.bs.modal","#ajax-modal",function(){h()});class E{constructor(a,t){s(this,"datatable",null);s(this,"selector",null);s(this,"tableEl",null);if(this.selector=a,this.tableEl=$(a),this.tableEl.length===0){console.error("No table found with selector: "+a);return}typeof t.ajax>"u"&&(t.ajax={url:new URLSearchParams(window.location.search).set("datatable",!0).toString(),type:"POST",data:function(e){e._token=$('meta[name="csrf-token"]').attr("content")}}),typeof t.order>"u"&&(t.order=[]),typeof t.drawCallback>"u"&&(t.drawCallback=function(e,n){$('[data-toggle="tooltip"]').tooltip()}),t.orderCellsTo=!0,t.fixedHeader=!0,t.processing=!0,t.serverSide=!0,t.searchDelay=5e3,t.dom="Btr<'row align-items-center'<'col-sm-4'l><'col-sm-4 text-center'i><'col-sm-4'p>>";for(const e of t.columns)e.defaultContent===void 0&&(e.defaultContent="-");return t.columns=[{data:null,orderable:!1,searchable:!1,render:function(e,n,l,r){return`
                        <div class="d-flex flex-row gap-4 justify-content-center align-items-center my-auto">
                            <p class="text-muted my-auto">${l.DT_RowIndex}.</p>
                            <div class="form-check my-auto">
                                <input class="form-check-input" hd-dt-selector type="checkbox" />
                            </div>
                        </div>
                    `},className:"text-center"},...t.columns],t.order=[[1,"desc"]],t.select={style:"multi",selector:'td:first-child input[type="checkbox"]'},t.scrollX=!0,t.iDisplayLength=50,this.datatable=$(a).DataTable(t),this.datatable.on("draw.dt",function(){handleTooltip()}),this}getDatatable(){return this.datatable}getTableEl(){return this.tableEl}}var S=()=>{const o=_dt.getDatatable();document.querySelector("[hd-dt-search]").addEventListener("keyup",function(t){o.search(t.target.value).draw()})},C=function(){if(typeof _dt===void 0)return;console.log("init datatabletools");const o=_dt.getDatatable();if(o.buttons().length===0)return;o.buttons().container().hide().appendTo($("#hd_export_menu")),document.querySelectorAll("#hd_export_menu [hd-export-button]").forEach(t=>{t.addEventListener("click",e=>{e.preventDefault();const n=e.target.getAttribute("hd-export-button");document.querySelector(".dt-buttons .buttons-"+n).click()})})},p=function(o){var e,n;const a=_dt.getDatatable(),t=(n=(e=a==null?void 0:a.context[0])==null?void 0:e.oInit)==null?void 0:n.deleteUrl;t==null||t==null||Swal.fire({title:"Emin misin?",text:`${o.length} kayıt silinecek!`,icon:"warning",showCancelButton:!0,confirmButtonText:"Evet, sil!",cancelButtonText:"Hayır, vazgeç!"}).then(l=>{l.isConfirmed&&$.ajax({url:t,type:"DELETE",data:{id:o},headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(r){a.ajax.reload()}})})};$(document).ready(function(){typeof _dt>"u"||(C(),S(),$(document).on("click","[hd-dt-selector-all]",function(){$("input[hd-dt-selector]").trigger("click")}),$(document).on("click","[hd-datatable-delete]",function(){const o=[$(this).attr("hd-datatable-delete")];p(o)}),$(document).on("click","[hd-dt-button]",function(){if($(this).attr("hd-dt-button")=="delete"){let t=_dt.getDatatable().rows({selected:!0}).data().toArray();if(t.length==0){Swal.fire({title:"Hata!",text:"Lütfen silmek istediğiniz kayıtları seçiniz!",icon:"error",confirmButtonText:"Tamam"});return}p(t.map(e=>e.id))}}))});$(document).on("click touch","[hd-button=checkParentTc]",function(){let o=$("input[name=parent_tc]");if(!(o!=null&&o.val())||o.val().length<0){d.Report.failure("Alanları Kontrol Ediniz...","Veli TC alanını kontrol ediniz...");return}d.Loading.dots(),j({method:"GET",url:route("student.parent-ajax"),params:{tc:o.val()}}).then(a=>{var t,e,n,l;if(a.status==200&&((t=a.data)==null?void 0:t.status)==!0){for(const r of["name","surname","phone","email","job","address"])$(`[name=parent_${r}]`).length&&((n=$(`[name=parent_${r}]`))==null||n.val((e=a==null?void 0:a.data)==null?void 0:e.data[r]));$("[name=is_parent_checked]").val(!0)}else d.Report.failure("!",((l=a==null?void 0:a.data)==null?void 0:l.message)||"Bu tc'li bir veli bulunamadı...")}).catch(a=>d.Report.failure("!",(a==null?void 0:a.message)||"Bir hata oluştu")).finally(()=>d.Loading.remove())});class D{constructor(a="translations"){this.key=a}trans(a,t={}){return this._replace(this._extract(a),t)}trans_choice(a,t=1,e={}){let n=this._extract(a,"|").split("|"),l;return n.some(r=>l=this._match(r,t)),l=l||(t>1?n[1]:n[0]),l=l.replace(/\[.*?\]|\{.*?\}/,""),this._replace(l,e)}_match(a,t){let e=a.match(/^[\{\[]([^\[\]\{\}]*)[\}\]](.*)/);if(e){if(e[1].includes(",")){let[n,l]=e[1].split(",",2);if(l==="*"&&t>=n)return e[2];if(n==="*"&&t<=l)return e[2];if(t>=n&&t<=l)return e[2]}return e[1]==t?e[2]:null}}_replace(a,t){if(typeof a=="object")return a;for(let e in t)a=a.toString().replace(`:${e}`,t[e]).replace(`:${e.toUpperCase()}`,t[e].toString().toUpperCase()).replace(`:${e.charAt(0).toUpperCase()}${e.slice(1)}`,t[e].toString().charAt(0).toUpperCase()+t[e].toString().slice(1));return a.toString().trim()}_extract(a,t=null){let e=a.toString().split("::"),n=e.pop().toString().split(".");return e.length>0&&(e[0]+="::"),e.concat(n).reduce((l,r)=>l[r]||t||a,window[this.key])}}window.__=new D;window.HDataTable=E;function b(){$("[hd-tooltip]:not(.hd-tooltip)").each(function(a,t){$(t).tooltip({title:$(t).attr("hd-tooltip")}),$(t).addClass("hd-tooltip")})}window.handleTooltip=b;$(document).ready(function(){const o=$("html").attr("lang");$(document).on("click","[hd-toggle-lang]",function(){const t=$("html").attr("lang"),e=$(this).attr("hd-toggle-lang");t!==e&&(window.location.href=route("toggle-locale",{locale:e}))});const a={weekdays:{longhand:["Pazar","Pazartesi","Salı","Çarşamba","Perşembe","Cuma","Cumartesi"],shorthand:["Paz","Pzt","Sal","Çar","Per","Cum","Cmt"]},months:{longhand:["Ocak","Şubat","Mart","Nisan","Mayıs","Haziran","Temmuz","Ağustos","Eylül","Ekim","Kasım","Aralık"],shorthand:["Oca","Şub","Mar","Nis","May","Haz","Tem","Ağu","Eyl","Eki","Kas","Ara"]},today:"Bugün",clear:"Temizle"};$("[hd-component=date]").each(function(t,e){const n=$(e).attr("hd-time")||!1;$(e).flatpickr({dateFormat:n?"Y-m-d H:i":"Y-m-d",time_24hr:!0,altInput:!0,allowInput:!0,altInputClass:"form-control ",altFormat:n?"j F Y - H:i":"j F Y",locale:o=="tr"?a:{},enableTime:n,time_24hr:!0,timeFormat:"H:i",minDate:$(e).attr("hd-min")||!1,maxDate:$(e).attr("hd-max")||!1})}),Inputmask({mask:"0(999) 999 99 99"}).mask("[hd-component=phone"),Inputmask({mask:"99999999999"}).mask("[hd-component=tc]"),Inputmask({alias:"email"}).mask("[hd-component=email]"),b()});
